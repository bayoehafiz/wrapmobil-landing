<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>:: Welcome To WRAP Mobile ::</title>
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
    <link href="css/app-responsive.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda-themeless.min.css" />
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- start Mixpanel -->
    <script type="text/javascript">
    (function(e, a) {
        if (!a.__SV) {
            var b = window;
            try {
                var c, l, i, j = b.location,
                    g = j.hash;
                c = function(a, b) {
                    return (l = a.match(RegExp(b + "=([^&]*)"))) ? l[1] : null
                };
                g && c(g, "state") && (i = JSON.parse(decodeURIComponent(c(g, "state"))), "mpeditor" === i.action && (b.sessionStorage.setItem("_mpcehash", g), history.replaceState(i.desiredHash || "", e.title, j.pathname + j.search)))
            } catch (m) {}
            var k, h;
            window.mixpanel = a;
            a._i = [];
            a.init = function(b, c, f) {
                function e(b, a) {
                    var c = a.split(".");
                    2 == c.length && (b = b[c[0]], a = c[1]);
                    b[a] = function() {
                        b.push([a].concat(Array.prototype.slice.call(arguments,
                            0)))
                    }
                }
                var d = a;
                "undefined" !== typeof f ? d = a[f] = [] : f = "mixpanel";
                d.people = d.people || [];
                d.toString = function(b) {
                    var a = "mixpanel";
                    "mixpanel" !== f && (a += "." + f);
                    b || (a += " (stub)");
                    return a
                };
                d.people.toString = function() {
                    return d.toString(1) + ".people (stub)"
                };
                k = "disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
                for (h = 0; h < k.length; h++) e(d, k[h]);
                a._i.push([b, c, f])
            };
            a.__SV = 1.2;
            b = e.createElement("script");
            b.type = "text/javascript";
            b.async = !0;
            b.src = "undefined" !== typeof MIXPANEL_CUSTOM_LIB_URL ? MIXPANEL_CUSTOM_LIB_URL : "file:" === e.location.protocol && "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//) ? "https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js" : "//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";
            c = e.getElementsByTagName("script")[0];
            c.parentNode.insertBefore(b, c)
        }
    })(document, window.mixpanel || []);
    mixpanel.init("f6c43f7be639bfd45ea273d0bd6bb344");
    </script>
    <!-- end Mixpanel -->
</head>

<body>
    <!-- ## HEADER ## -->
    <header id="header">
        <div class="container-fluid">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <a href="index.html" id="logo"><img src="images/logo2.png" alt="Wrapmobil"></a>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <div class="contact">
                    <p>HUBUNGI KAMI</p>
                    <span><a href="#" id="chatBtn"><strong>CHAT NOW</strong></a></span>
                </div>
            </div>
        </div>
    </header>
    <!-- ## BANNER ## -->
    <div class="banner-inner">
        <figure class="banner-figure"><img src="images/road-people-street-smartphone1-edited2.jpg" alt="Sudah siapkah anda untuk merubah Jakarta?"></figure>
        <div class="banner-content">
            <div class="container-fluid">
                <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12 col-lg-offset-1">
                    <div class="register-form f-r">
                        <h2>Daftar sekarang</h2>
                        <div class="form-element">
                            <label for="name" class="empty-label">Nama Depan</label>
                            <input type="text" class="form-control" placeholder="Nama Depan" title="" id="fname">
                        </div>
                        <div class="form-element">
                            <label for="name2" class="empty-label">Nama Belakang</label>
                            <input type="text" class="form-control" placeholder="Nama Belakang" title="" id="lname">
                        </div>
                        <div class="form-element">
                            <label for="email" class="empty-label">Email</label>
                            <input type="text" class="form-control" placeholder="Email" title="" id="email">
                        </div>
                        <div class="form-element">
                            <label for="tel" class="empty-label">Nomor Telepon</label>
                            <input type="text" class="form-control" placeholder="Nomor Telepon" title="" id="tel">
                        </div>
                        <div class="form-element">
                            <button class="btn ladda-button" data-style="expand-right" id="regBtn"><span class="ladda-label">DAFTAR</span></button>
                        </div>
                        <span class="form-text1">Sudah punya akun? <a href="#">Login</a> disini</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ## MAIN CONTENT AREA ## -->
    <section id="main">
        <div class="container-fluid">
            <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12 col-lg-offset-1">
                <div class="widgets-list1">
                    <div class="col-lg-8 col-md-9 col-sm-12 col-xs-12 title">
                        <h1>Sudah siapkah anda untuk merubah Jakarta?</h1></div>
                    <div class="clearfix">
                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-12">
                            <h2>Daftarkan diri Anda</h2>
                            <p>Daftarkan mobil Anda melalui aplikasi Wrapmobil dan dapatkan uang tambahan dengan mudah.</p>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-sm-12 col-xs-12">
                            <h2>Pilih iklan yang Anda suka</h2>
                            <p>Anda bebas memilih iklan manapun yang anda suka untuk ditempel untuk anda. Ingat, Andalah bosnya!</p>
                        </div>
                        <div class="col-lg-4 col-md-4 col-sm-4 col-sm-12 col-xs-12">
                            <h2>Langsung dapatkan uang tambahan!</h2>
                            <p>Jalani rutinitas berkendara seperti biasa. Tapi, kali ini Anda akan membuat kagum teman-teman Anda sembari mengeruk uang tambahan setiap KM. Sekali dayung, dua pulau terlampaui!</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- ## FOOTER ## -->
    <footer id="footer">
        <div class="container-fluid">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <span class="f-logo"><a href="#"><img src="images/logo2.png" alt="Wrapmobil"></a></span>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                <span class="copyright">Copyright &copy; 2016 Wrapmobil. All rights reserved.</span>
            </div>
        </div>
    </footer>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="bower_components/noty/js/noty/packaged/jquery.noty.packaged.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/spin.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ladda-bootstrap/0.9.4/ladda.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript" src="js/retina.min.js"></script>
    <script src="js/app.js"></script>
    <script>
    window.intercomSettings = {
        app_id: "tp72tgp4",
        custom_launcher_selector: '#chatBtn'
    };
    </script>
    <script>
    $(function() {
        // Mixpanel
        mixpanel.track("page_views: driver");

        // interkom integration
        var w = window;
        var ic = w.Intercom;
        if (typeof ic === "function") {
            ic('reattach_activator');
            ic('update', intercomSettings);
        } else {
            var d = document;
            var i = function() {
                i.c(arguments)
            };
            i.q = [];
            i.c = function(args) {
                i.q.push(args)
            };
            w.Intercom = i;

            function l() {
                var s = d.createElement('script');
                s.type = 'text/javascript';
                s.async = true;
                s.src = 'https://widget.intercom.io/widget/tp72tgp4';
                var x = d.getElementsByTagName('script')[0];
                x.parentNode.insertBefore(s, x);
            }
            if (w.attachEvent) {
                w.attachEvent('onload', l);
            } else {
                w.addEventListener('load', l, false);
            }
        }
        // eof interkom integration

        $('#chatBtn').click(function() {
            // Mixpanel 
            mixpanel.track("click: chat");
        })

        $('#regBtn').click(function(e) {
            // Ladda button
            e.preventDefault();
            var l = Ladda.create(this);
            l.start();

            // Mixpanel
            mixpanel.track("signup: driver");

            var fname = $('#fname').val();
            var lname = $('#lname').val();
            var email = $('#email').val();
            var tel = $('#tel').val();

            if (fname == '' || fname == undefined) {
                l.stop();
                noty({
                    text: 'Please type your first name',
                    layout: 'top',
                    theme: 'relax', // or 'relax'
                    type: 'error'
                });
                $('#fname').focus();
            } else if (lname == '' || lname == undefined) {
                l.stop();
                noty({
                    text: 'Please type your last name',
                    layout: 'top',
                    theme: 'relax', // or 'relax':
                    type: 'error'
                });
                $('#lname').focus();
            } else if (email == '' || email == undefined) {
                l.stop();
                noty({
                    text: 'Please enter valid email',
                    layout: 'top',
                    theme: 'relax', // or 'relax'
                    type: 'error'
                });
                $('#email').focus();
            } else if (tel == '' || tel == undefined) {
                l.stop();
                noty({
                    text: 'Please enter your phone number',
                    layout: 'top',
                    theme: 'relax', // or 'relax'
                    type: 'error'
                });
                $('#tel').focus();
            } else {
                var data = {
                    fname: fname,
                    lname: lname,
                    email: email,
                    phone: tel
                }

                $.ajax({
                    // url: 'https://api.wrapmobil.co.id/auth/register/drv',
                    url: 'http://localhost:3000/auth/register/drv',
                    type: 'POST',
                    data: data,
                    success: function(msg) {
                        if (!msg.success) {
                            l.stop();
                            noty({
                                text: msg.message,
                                layout: 'top',
                                theme: 'relax', // or 'relax'
                                type: 'error'
                            });
                        } else {
                            l.stop();
                            noty({
                                text: 'Thank You! Your data has been successfully listed in the waiting list. We will review it and contact you later about next step registration process.',
                                layout: 'top',
                                theme: 'relax', // or 'relax'
                                type: 'success'
                            });
                        }

                        // dummy reset
                        $('#fname').val('').focus();
                        $('#lname').val('');
                        $('#email').val('');
                        $('#tel').val('');
                    }
                });
            }
        })
    });
    </script>
</body>

</html>
